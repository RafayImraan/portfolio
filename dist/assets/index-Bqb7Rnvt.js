import{r as a}from"./index-BlqfzuLu.js";var I=new Map,l=new WeakMap,x=0,T;function _(e){return e?(l.has(e)||(x+=1,l.set(e,x.toString())),l.get(e)):"0"}function B(e){return Object.keys(e).sort().filter(r=>e[r]!==void 0).map(r=>`${r}_${r==="root"?_(e.root):e[r]}`).toString()}function $(e){const r=B(e);let s=I.get(r);if(!s){const i=new Map;let c;const u=new IntersectionObserver(n=>{n.forEach(t=>{var o;const g=t.isIntersecting&&c.some(d=>t.intersectionRatio>=d);e.trackVisibility&&typeof t.isVisible>"u"&&(t.isVisible=g),(o=i.get(t.target))==null||o.forEach(d=>{d(g,t)})})},e);c=u.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),s={id:r,observer:u,elements:i},I.set(r,s)}return s}function j(e,r,s={},i=T){if(typeof window.IntersectionObserver>"u"&&i!==void 0){const o=e.getBoundingClientRect();return r(i,{isIntersecting:i,target:e,intersectionRatio:typeof s.threshold=="number"?s.threshold:0,time:0,boundingClientRect:o,intersectionRect:o,rootBounds:o}),()=>{}}const{id:c,observer:u,elements:n}=$(s),t=n.get(e)||[];return n.has(e)||n.set(e,t),t.push(r),u.observe(e),function(){t.splice(t.indexOf(r),1),t.length===0&&(n.delete(e),u.unobserve(e)),n.size===0&&(u.disconnect(),I.delete(c))}}function z({threshold:e,delay:r,trackVisibility:s,rootMargin:i,root:c,triggerOnce:u,skip:n,initialInView:t,fallbackInView:o,onChange:g}={}){var d;const[h,M]=a.useState(null),p=a.useRef(g),b=a.useRef(t),[S,w]=a.useState({inView:!!t,entry:void 0});p.current=g,a.useEffect(()=>{if(b.current===void 0&&(b.current=t),n||!h)return;let v;return v=j(h,(R,E)=>{const O=b.current;b.current=R,!(O===void 0&&!R)&&(w({inView:R,entry:E}),p.current&&p.current(R,E),E.isIntersecting&&u&&v&&(v(),v=void 0))},{root:c,rootMargin:i,threshold:e,trackVisibility:s,delay:r},o),()=>{v&&v()}},[Array.isArray(e)?e.toString():e,h,c,i,u,n,s,o,r]);const y=(d=S.entry)==null?void 0:d.target,A=a.useRef(void 0);!h&&y&&!u&&!n&&A.current!==y&&(A.current=y,w({inView:!!t,entry:void 0}),b.current=t);const f=[M,S.inView,S.entry];return f.ref=f[0],f.inView=f[1],f.entry=f[2],f}export{z as u};
